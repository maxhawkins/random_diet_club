function updateScrollY(){lastScrollY=window.scrollY}function collapseNavbar(){lastScrollY>50?$(".navbar-fixed-top").addClass("top-nav-collapse"):$(".navbar-fixed-top").removeClass("top-nav-collapse")}function submitForm(e){return $.ajax({type:"GET",url:"https://club.us14.list-manage.com/subscribe/post-json?c=?",data:e.serialize(),cache:!1,dataType:"json",contentType:"application/json; charset=utf-8"})}function showMessage(e,a){var t=$("#msg-wrapper"),o=t.find(".label"),r="success"===a?"label-primary":"label-error";o.addClass(r),o.addClass("on"),o.text(e),t.show()}function clearMessage(){var e=$("#msg-wrapper"),a=e.find(".label");e.hide(),a.removeClass("label-primary label-error"),a.removeClass("on"),a.text("")}function allSleeping(e){for(var a=0,t=0;t<e.length;t++){var o=e[t];o.speed<.01&&o.angularSpeed<.01&&a++}return a==e.length}function updateImages(e){for(var a=0;a<e.length;a++){var t=e[a],o=images[a],r=t.position.x/50,n=t.position.y/50,i="translate3d("+r+"px, "+n+"px, 0) rotate("+t.angle+"rad)";o.style.transform=i}}function update(e){Runner.tick(runner,engine,1e3/60);var a=Composite.allBodies(engine.world);triggered&&!allSleeping(a)&&updateImages(a),collapseNavbar(),window.requestAnimationFrame(update)}function trigger(){for(var e=0;e<bodies.length;e++){var a=bodies[e],t=11;document.body.offsetWidth<500&&(t=6);var o={x:-15e3,y:50*launchY},r={x:o.x-20,y:o.y},n={x:(Math.sqrt(Math.random())+.5)*t,y:(Math.random()-.5)*(t+3)};Math.random()>.5&&(o.x=50*(window.innerWidth+300),r.x=o.x+12,n.x*=-1),Body.setPosition(a,o),Body.applyForce(a,r,n)}update();for(var e=0;e<images.length;e++)images[e].style.display="block"}var logos=["img/pear.png"],logo=document.getElementById("logo"),logoIdx=Math.floor(Math.random()*logos.length);logo.src=logos[logoIdx],APNG.ifNeeded().then(function(){APNG.animateImage(logo)});var lastScrollY=0;$(window).scroll(updateScrollY),$(document).ready(updateScrollY),$(function(){$("a.page-scroll").bind("click",function(e){var a=$(this);$("html, body").stop().animate({scrollTop:$(a.attr("href")).offset().top},800,"swing"),e.preventDefault()})}),$(function(){var e=$("form");e.submit(function(a){a.preventDefault(),clearMessage();var t=e.find('[type="submit"]');t.addClass("loading"),t.attr("disabled",!0),submitForm(e).then(function(a){if(t.removeClass("loading"),t.attr("disabled",!1),"success"===a.result){var o="Welcome to the club! Please verify your email to complete your registration.";e.hide(),showMessage(o,a.result)}else showMessage(a.msg,a.result)},function(e){var a="Send failed. Please try again.";t.removeClass("loading"),t.attr("disabled",!1),showMessage(a,"error")})})});for(var Engine=Matter.Engine,World=Matter.World,Bodies=Matter.Bodies,Body=Matter.Body,Vector=Matter.Vector,Runner=Matter.Runner,Composite=Matter.Composite,engine=Engine.create(),bodies=[],images=[],particles=document.getElementById("particles"),downloadSection=document.getElementById("download"),aboutSection=document.getElementById("about"),launchY=downloadSection.offsetTop-aboutSection.offsetTop,SRCS=["img/basil.png","img/eggplant.png","img/cabbage.png","img/cabbage2.png","img/salad.png","img/cucumber.png","img/apple.png","img/grape.png"],i=0;i<20;i++){var body=Bodies.rectangle(-15e3,50*launchY,100,100,{friction:0,frictionAir:.008});body.isSensor=!0,body.collisionFilter.category=2,bodies.push(body);var maxWidth=200;document.body.offsetWidth<500&&(maxWidth=150);var scale=.8+.3*(Math.random()-.5),width=maxWidth*scale,srcIdx=Math.floor(Math.random()*SRCS.length),src=SRCS[srcIdx],image=document.createElement("img");image.className="particle",image.src=src,image.style.width=width+"px",image.style.transform="translate(-9999, -9999)",particles.appendChild(image),images.push(image)}engine.world.gravity.y=0,World.add(engine.world,bodies);var runner=Runner.create();window.requestAnimationFrame(update);var triggered=!1;$(window).scroll(function(){if(!triggered){var e=window.scrollY+window.innerHeight,a=downloadSection.offsetTop;e<a||e>a+600||(triggered=!0,trigger())}});